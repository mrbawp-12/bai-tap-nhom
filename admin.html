<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="B·∫£ng ƒëi·ªÅu khi·ªÉn qu·∫£n tr·ªã tin t·ª©c - N·ªôi Th·∫•t TrippaD">
  <link rel="icon" href="imgs/favicon.png" type="image/png">
  <title>Admin - Qu·∫£n l√Ω Tin t·ª©c | N·ªôi Th·∫•t TrippaD</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="main-wrapper">
    <header class="site-header">
      <div class="brand">
        <a href="index.html" style="text-decoration: none; color: inherit;">
          <h1>N·ªôi Th·∫•t TrippaD</h1>
        </a>
        <p class="tagline">Qu·∫£n tr·ªã tin t·ª©c</p>
      </div>
      <div class="header-right">
        <a href="index.html" class="btn">‚üµ Trang ch·ªß</a>
      </div>
    </header>

    <nav class="main-nav">
      <ul>
        <li><a href="index.html">Trang ch·ªß</a></li>
        <li class="dropdown">
          <a href="#" class="dropbtn">üè¢ Th∆∞∆°ng hi·ªáu ‚ñæ</a>
          <div class="dropdown-content">
            <a href="about.html">üéØ T·ªïng quan c√¥ng ty</a>
            <a href="about.html#reasons">üí° L√Ω do ch·ªçn ch√∫ng t√¥i</a>
            <a href="about.html#partners">ü§ù ƒê·ªëi t√°c & Kh√°ch h√†ng</a>
            <a href="about.html#development">üöÄ H√†nh tr√¨nh ph√°t tri·ªÉn</a>
          </div>
        </li>
        <li><a href="news.html">Tin t·ª©c</a></li>
        <li><a href="contact.html">Li√™n h·ªá</a></li>
      </ul>
    </nav>

    <main class="admin-wrap">
      <div class="admin-top">
        <div style="flex:1; min-width:300px;">
          <div class="card-form" id="formCard">
            <h3>Th√™m / S·ª≠a tin t·ª©c</h3>
            <div class="form-row">
              <input id="titleInput" type="text" placeholder="Ti√™u ƒë·ªÅ (vd: ∆Øu ƒë√£i m√πa h√®: Gi·∫£m 20%)">
              <select id="typeSelect">
                <option value="Khuy·∫øn m√£i">Khuy·∫øn m√£i</option>
                <option value="Tuy·ªÉn d·ª•ng">Tuy·ªÉn d·ª•ng</option>
                <option value="Ho·∫°t ƒë·ªông c√¥ng ty">Ho·∫°t ƒë·ªông c√¥ng ty</option>
              </select>
            </div>
            <div class="form-row">
              <input id="imageInput" type="text" placeholder="URL ·∫£nh (ho·∫∑c imgs/banner1.jpg)">
              <select id="sampleImgs">
                <option value="">‚Äî Ch·ªçn ·∫£nh m·∫´u ‚Äî</option>
                <option value="imgs/promo-sample.jpg">promo-sample.jpg</option>
                <option value="imgs/recruit-sample.jpg">recruit-sample.jpg</option>
                <option value="imgs/event-sample.jpg">event-sample.jpg</option>
              </select>
            </div>
            <div class="form-row">
              <textarea id="descInput" placeholder="M√¥ t·∫£ ng·∫Øn"></textarea>
            </div>
            <div class="form-row admin-actions">
              <button id="addBtn" class="btn btn-primary">Th√™m tin</button>
              <button id="updateBtn" class="btn" style="display:none;">C·∫≠p nh·∫≠t</button>
              <button id="clearForm" class="btn">X√≥a form</button>
              <div class="muted" style="margin-left:auto">B√†i hi·ªán c√≥: <span id="countSpan">0</span></div>
            </div>
          </div>
        </div>

        <div style="width:320px; min-width:260px;">
          <div class="card-form">
            <h4>C√¥ng c·ª• nhanh</h4>
            <p class="small">B·∫°n c√≥ th·ªÉ x√≥a t·ª´ng tin, ho·∫∑c x√≥a t·∫•t c·∫£ ƒë·ªÉ reset.</p>
            <div style="display:flex;gap:0.6rem;">
              <button id="deleteAllBtn" class="btn btn-danger">X√≥a t·∫•t c·∫£ tin</button>
              <button id="seedBtn" class="btn">T·∫°o m·∫´u nhanh</button>
            </div>
            <p class="muted" style="margin-top:0.8rem;">D·ªØ li·ªáu l∆∞u t·∫°i localStorage (key: <code>newsPosts_v1</code>).
            </p>
          </div>
        </div>
      </div>

      <section>
        <h3>Danh s√°ch tin</h3>
        <div class="news-grid" id="cardsWrap"></div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="footer-inner">
        <div>
          <h3>N·ªôi Th·∫•t TrippaD</h3>
          <p>ƒê·ªãa ch·ªâ: 73/110 Tr·∫ßn Duy H∆∞ng, C·∫ßu Gi·∫•y, H√† N·ªôi</p>
        </div>
        <div>
          <p>&copy; 2025 N·ªôi Th·∫•t TrippaD</p>
        </div>
      </div>
    </footer>
  </div>

  <script>
    const STORAGE_KEY = 'newsPosts_v1';
    const cardsWrap = document.getElementById('cardsWrap');
    const countSpan = document.getElementById('countSpan');
    const titleInput = document.getElementById('titleInput');
    const typeSelect = document.getElementById('typeSelect');
    const imageInput = document.getElementById('imageInput');
    const descInput = document.getElementById('descInput');
    const sampleImgs = document.getElementById('sampleImgs');
    const addBtn = document.getElementById('addBtn');
    const updateBtn = document.getElementById('updateBtn');
    const clearForm = document.getElementById('clearForm');
    const deleteAllBtn = document.getElementById('deleteAllBtn');
    const seedBtn = document.getElementById('seedBtn');

    let editingIndex = null;

    function loadPosts() {
      const raw = localStorage.getItem(STORAGE_KEY);
      return raw ? JSON.parse(raw) : [];
    }

    function savePosts(data) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }

    function renderPosts() {
      const posts = loadPosts();
      cardsWrap.innerHTML = '';
      countSpan.textContent = posts.length;
      posts.forEach((p, i) => {
        const card = document.createElement('div');
        card.className = 'news-card';
        card.innerHTML = `
          <img src="${p.image || 'imgs/promo-sample.jpg'}" alt="${escapeHtml(p.title)}">
          <h3>${escapeHtml(p.title)}</h3>
          <p>${escapeHtml(p.desc)}</p>
          <div class='muted'>${escapeHtml(p.type)} ‚Ä¢ ${new Date(p.date).toLocaleDateString()}</div>
          <div class='card-actions'>
            <button class='btn' onclick='editPost(${i})'>S·ª≠a</button>
            <button class='btn btn-danger' onclick='deletePost(${i})'>X√≥a</button>
          </div>`;
        cardsWrap.appendChild(card);
      });
    }

    function addPost() {
      const title = titleInput.value.trim();
      const desc = descInput.value.trim();
      const type = typeSelect.value;
      const image = imageInput.value.trim();
      if (!title || !desc) return alert('Vui l√≤ng nh·∫≠p ƒë·ªß ti√™u ƒë·ªÅ v√† m√¥ t·∫£.');

      const posts = loadPosts();
      const newPost = { title, desc, type, image, date: new Date().toISOString() };
      posts.push(newPost);
      savePosts(posts);
      clearInputs();
      renderPosts();
    }

    function deletePost(i) {
      if (!confirm('X√≥a tin n√†y?')) return;
      const posts = loadPosts();
      posts.splice(i, 1);
      savePosts(posts);
      renderPosts();
    }

    function editPost(i) {
      const posts = loadPosts();
      const p = posts[i];
      titleInput.value = p.title;
      descInput.value = p.desc;
      typeSelect.value = p.type;
      imageInput.value = p.image;
      editingIndex = i;
      addBtn.style.display = 'none';
      updateBtn.style.display = 'inline-block';
    }

    function updatePost() {
      if (editingIndex === null) return;
      const posts = loadPosts();
      posts[editingIndex] = {
        title: titleInput.value.trim(),
        desc: descInput.value.trim(),
        type: typeSelect.value,
        image: imageInput.value.trim(),
        date: new Date().toISOString()
      };
      savePosts(posts);
      editingIndex = null;
      addBtn.style.display = 'inline-block';
      updateBtn.style.display = 'none';
      clearInputs();
      renderPosts();
    }

    function clearInputs() {
      titleInput.value = '';
      descInput.value = '';
      imageInput.value = '';
      typeSelect.value = 'Khuy·∫øn m√£i';
    }

    function deleteAll() {
      if (!confirm('X√≥a to√†n b·ªô tin?')) return;
      localStorage.removeItem(STORAGE_KEY);
      renderPosts();
    }

    function seedSample() {
      const demo = [
        { title: 'Khai tr∆∞∆°ng showroom m·ªõi t·∫°i C·∫ßu Gi·∫•y', desc: '∆Øu ƒë√£i 20% to√†n b·ªô s·∫£n ph·∫©m trong tu·∫ßn l·ªÖ khai tr∆∞∆°ng.', type: 'Khuy·∫øn m√£i', image: 'imgs/promo-sample.jpg', date: new Date().toISOString() },
        { title: 'Tuy·ªÉn d·ª•ng nh√¢n vi√™n thi·∫øt k·∫ø n·ªôi th·∫•t', desc: 'C∆° h·ªôi l√†m vi·ªác trong m√¥i tr∆∞·ªùng nƒÉng ƒë·ªông v√† s√°ng t·∫°o.', type: 'Tuy·ªÉn d·ª•ng', image: 'imgs/recruit-sample.jpg', date: new Date().toISOString() }
      ];
      savePosts(demo);
      renderPosts();
    }

    function escapeHtml(s) {
      if (!s) return ''; return s.replaceAll('&', '&amp;').replaceAll('<', '&lt;').replaceAll('>', '&gt;');
    }

    addBtn.addEventListener('click', addPost);
    updateBtn.addEventListener('click', updatePost);
    clearForm.addEventListener('click', clearInputs);
    deleteAllBtn.addEventListener('click', deleteAll);
    seedBtn.addEventListener('click', seedSample);
    sampleImgs.addEventListener('change', e => imageInput.value = e.target.value);

    renderPosts();
  </script>
  <script src="script.js"></script>

  <div class="floating-contact">
    <div class="contact-icons" id="contactIcons">
      <a href="https://zalo.me/your-zalo-number" class="contact-icon zalo" data-tooltip="Chat Zalo" target="_blank">
        <span>Z</span>
      </a>
      <a href="https://m.me/your-messenger-id" class="contact-icon messenger" data-tooltip="Messenger" target="_blank">
        <span>M</span>
      </a>
      <a href="tel:your-phone-number" class="contact-icon phone" data-tooltip="G·ªçi ngay">
        <span>üìû</span>
      </a>
    </div>
    <button class="contact-trigger" id="contactTrigger">
      <span>üí¨</span>
    </button>
  </div>
</body>

</html>